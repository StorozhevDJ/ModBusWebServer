<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<title>User Info</title>
<link rel="stylesheet" th:href="@{/css/topmenu.css}" />
<th:block th:include="/_head"></th:block>
<script th:inline="javascript">var path = "[(@{/})]";</script>
<script type="text/javascript" th:src="@{/js/device.js}"></script>
</head>
<body class="page">
	<div id="wrap">
		<!-- Include _menu.html -->
		<th:block th:include="/_menu"></th:block>
<div class="page-headline">Страница МЛП устройств</div>
		<div id="main">

		<h3>
			Welcome : <span th:utext="${#request.userPrincipal.name}"></span>
		</h3>
		
		<h3>
			Устройства в базе
		</h3>
		<table border="1">
			<tr>
				<th>Адрес</th>
				<th>Тип</th>
				<th>Серийный номер</th>
				<th>Комментарий</th>
				<th th:if="${admin != null}"> </th>
			</tr>
			<tr th:each="deviceInfo : ${deviceInfos}" th:id="${deviceInfo.serial}">
				<td th:utext="${deviceInfo.address}">..</td>
				<td th:utext="${deviceInfo.type}">..</td>
				<td th:utext="${deviceInfo.serial}">..</td>
				<td th:utext="${deviceInfo.comment}">..</td>
				<td th:if="${admin != null}"  >
					<button th:onclick="'DeleteDevice(' + ${deviceInfo.serial} + ');'">Удалить</button>
					<button th:onclick="'getMLPData(' + ${deviceInfo.serial} + ');'">Данные</button>
				</td>
			</tr>
		</table>
		
		<h3>
			Архив данных
		</h3>
		<table border="1">
			<tr>
				<th>Дата/время</th>
				<th>А</th>
				<th>X</th>
				<th>Y</th>
				<th>Z</th>
				<th>Температура</th>
				
				<th th:if="${admin != null}"> </th>
			</tr>
			<tbody class="mlpdata"></tbody>
		</table>
		<!-- Image loader -->
		<div id='loader' style='display: none;'>
			<img th:src="@{/images/animationProcessing.gif}">
		</div>
		<!-- Image loader -->

		<div th:if="${userInfo != null}" th:utext="${userInfo}"></div>
		<div th:if="${admin != null}">
			<a href="#">Администрирование</a>
		</div>
</div>
		<th:block th:include="/_footer"></th:block>
	</div>
	<!--end wrap-->
</body>

</html>